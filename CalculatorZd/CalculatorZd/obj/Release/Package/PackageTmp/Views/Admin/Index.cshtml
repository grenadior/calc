@using BO.Implementation
@{
    ViewBag.Title = "Админка";
    Layout = "~/Views/Shared/_NgLayout.cshtml";
}
@model CalculatorZd.Models.AdminViewModel


<!DOCTYPE html>
<br />
<strong>
    @Html.ActionLink("Просмотр платежей", "FirmPayments", "Admin")
</strong>
<br /><br /><strong>
    @Html.ActionLink("Добавить платеж", "AddFirmPayment", "Admin")
</strong>
<br /><br /><strong>
    @Html.ActionLink("Запросы", "Index", "Admin")
</strong>
<br/>
<br />
<table class="table table-striped table-bordered table-condensed table-hover" style="width:70%">
        <thead>
            <tr>
                <th data-field="id" class="col-md-2">ID</th>
                <th data-field="name" class="col-md-6">
                    <i class="glyphicon glyphicon-star"></i>
                    Название фирмы
                </th>
                <th data-field="name" class="col-md-6">
                    <i class="glyphicon glyphicon-star"></i>
                    Дата добавления
                </th>
                <th data-field="name" class="col-md-6">
                    <i class="glyphicon glyphicon-star"></i>
                    Текст ошибки
                </th>
                <th data-field="name" class="col-md-6">
                    <i class="glyphicon glyphicon-star"></i>
                    IP
                </th>
                <th data-field="price" class="col-md-4">
                    <i class="glyphicon glyphicon-heart"></i>
                    Начало запроса
                </th>
                <th data-field="price" class="col-md-4">
                    <i class="glyphicon glyphicon-heart"></i>
                    Окончание запроса
                </th>
                <th data-field="price" class="col-md-4">
                    <i class="glyphicon glyphicon-heart"></i>
                   Статус запроса
                </th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.FirmQueryStatistics)
            {
                <tr data-index="@item.ID">
                    <td>@item.ID</td>
                    <td>@item.FirmName</td>
                    <td style="">@item.AddDate</td>
                    <td style="">@item.TextError</td>
                    <td style="">@item.IP</td>
                    <td style="">@item.TimeBegin</td>
                    <td style="">@item.TimeEnd</td>
                    <td style="">@item.QueryStatisticStatusName</td>
                </tr> 
            }
        </tbody>
    </table>
    <div>
            <div style="white-space: pre-wrap; "></div>
            @Html.Raw( @ViewBag.CacheReport)

            @*@using (Ajax.BeginForm("ClearAllCache", "Admin", FormMethod.Post, null))
                {
                <input type="submit" value="Clear all caches" />
                }*@

            @using (Ajax.BeginForm("ReloadServerProps", "Admin", FormMethod.Post, null))
                {
                <input type="submit" value="ReloadServerProps" />
                }
        </div>
    <div>ServerProperties.Instance.EmailPort:@ServerProperties.Instance.EmailPort</div>
    <div>ServerProperties.Instance.FeedBackEmail:@ServerProperties.Instance.FeedBackEmail</div>
